{% extends "base.html" %}

{% block content %}
<div class="login-container">
    <div class="login-card">
        <div class="card-body text-center">
            <div class="mb-4">
                <div style="font-size: 3rem; color: var(--neon-blue); text-shadow: 0 0 20px rgba(0, 243, 255, 0.6);">
                    üîë
                </div>
                <h2 class="text-neon mb-2 mt-3">CHANGE PASSWORD</h2>
                <p class="small mb-0" style="letter-spacing: 1px; color: rgba(200, 200, 200, 0.8);">UPDATE YOUR ACCESS CREDENTIALS</p>
            </div>
            
            {% if error %}
            <div class="alert alert-danger border border-danger mb-3" style="background: rgba(220, 53, 69, 0.1); color: #ff6b6b; font-size: 0.85rem;">
                <i class="bi bi-exclamation-triangle"></i> {{ error }}
            </div>
            {% endif %}
            
            {% if success %}
            <div class="alert alert-success border border-success mb-3" style="background: rgba(40, 167, 69, 0.1); color: #51cf66; font-size: 0.85rem;">
                <i class="bi bi-check-circle"></i> {{ success }}
            </div>
            {% endif %}
            
            <form action="/change-password" method="POST">
                <div class="mb-3 text-start">
                    <label class="form-label small" style="letter-spacing: 1px; color: rgba(200, 200, 200, 0.8);">CURRENT PASSWORD</label>
                    <input type="password" name="current_password" class="form-control form-control-cyber" placeholder="Enter current password" required autocomplete="current-password">
                </div>
                
                <div class="mb-3 text-start">
                    <label class="form-label small" style="letter-spacing: 1px; color: rgba(200, 200, 200, 0.8);">NEW PASSWORD</label>
                    <input type="password" name="new_password" class="form-control form-control-cyber" placeholder="Enter new password" required autocomplete="new-password" minlength="6">
                    <div class="form-text" style="font-size: 0.7rem; color: rgba(180, 180, 180, 0.6); margin-top: 0.25rem;">
                        <i class="bi bi-info-circle"></i> Minimum 6 characters required
                    </div>
                </div>
                
                <div class="mb-4 text-start">
                    <label class="form-label small" style="letter-spacing: 1px; color: rgba(200, 200, 200, 0.8);">CONFIRM NEW PASSWORD</label>
                    <input type="password" name="confirm_password" class="form-control form-control-cyber" placeholder="Confirm new password" required autocomplete="new-password" minlength="6">
                </div>
                
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-cyber py-2">
                        <span style="letter-spacing: 2px;">‚ö° UPDATE PASSWORD</span>
                    </button>
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary py-2">
                        <span style="letter-spacing: 2px;">‚Üê CANCEL</span>
                    </a>
                </div>
            </form>
            
            <div class="mt-4 pt-3 border-top border-secondary">
                <small style="font-size: 0.7em; letter-spacing: 0.5px; color: rgba(180, 180, 180, 0.7);">
                    <i class="bi bi-shield-check"></i> SITARA DYNAMICS SECURITY PROTOCOL v4.2<br>
                    <span style="color: var(--neon-blue);">üîí PASSWORD CHANGES ARE LOGGED AND ENCRYPTED</span>
                </small>
            </div>
        </div>
    </div>
</div>

<style>
    /* Additional password change page specific styles */
    body {
        background: linear-gradient(135deg, #0a0a0a 0%, #001a2e 100%);
    }
    
    .login-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
            repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 243, 255, 0.03) 2px, rgba(0, 243, 255, 0.03) 4px),
            repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0, 243, 255, 0.03) 2px, rgba(0, 243, 255, 0.03) 4px);
        pointer-events: none;
        z-index: 1;
    }
    
    .login-card {
        position: relative;
        z-index: 2;
        animation: fadeInUp 0.6s ease-out;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .form-control-cyber:focus {
        animation: pulse 0.3s ease-out;
    }
    
    @keyframes pulse {
        0% { box-shadow: 0 0 0 rgba(0, 243, 255, 0); }
        50% { box-shadow: 0 0 20px rgba(0, 243, 255, 0.4); }
        100% { box-shadow: 0 0 15px rgba(0, 243, 255, 0.3); }
    }
    
    /* Cancel button styling */
    .btn-outline-secondary {
        background: rgba(50, 50, 50, 0.3);
        border: 1px solid rgba(150, 150, 150, 0.4);
        color: rgba(200, 200, 200, 0.8);
        transition: all 0.3s ease;
    }
    
    .btn-outline-secondary:hover {
        background: rgba(80, 80, 80, 0.5);
        border-color: rgba(200, 200, 200, 0.6);
        color: rgba(255, 255, 255, 0.9);
        box-shadow: 0 0 10px rgba(150, 150, 150, 0.2);
    }
    
    /* Success alert styling */
    .alert-success {
        animation: slideInDown 0.4s ease-out;
    }
    
    /* Error alert styling */
    .alert-danger {
        animation: shake 0.5s ease-out;
    }
    
    @keyframes slideInDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
    }
</style>
{% endblock %}
